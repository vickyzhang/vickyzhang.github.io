<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>首页</title>
  
    <meta name="author" content="Firstname Lastname">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/twitter/stylesheets/bootstrap.min.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/stylesheets/style.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/widgets/google_prettify/stylesheets/twitter-bootstrap.css" type="text/css" rel="stylesheet" media="all">
 

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">Vicky&#39;s color</a>
          <ul class="nav">
            
              


  <li><a href="/archive">Archive</a></li>


            
              


  <li><a href="/tags">Tags</a></li>


            
              


  <li><a href="/categories">Categories</a></li>


            
              


  <li><a href="/pages">Pages</a></li>


            
              


  <li><a href="/about">About Me</a></li>


            
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        
<div class="page-header">
  <h1>首页 </h1>
</div>

<div class="row">
  <div class="span12">
    


<h2>最近更新</h2>


<div class="post">
  <h3 class="title"><a href="/general/mysql-%E7%B4%A2%E5%BC%95/">mysql 索引</a> <span class="date">2016-03-16</span></h3>

  <pre><code>SHOW INDEX FROM t1  
</code></pre>

<p>优点：</p>

<ol>
<li>通过创建唯一索引，保证数据库表每行数据的唯一性。<br /></li>
<li>提高查询速度。<br /></li>
<li>在使用分组和排序时，可以减少查询中分组和排序时间。<br /></li>
</ol>

<p>缺点:</p>

<ol>
<li>维护索引需要耗费数据库资源。<br /></li>
<li>索引需要占用磁盘空间。<br /></li>
<li>当对表的说进行增删改的时候，因为要维护索引，索引速度会受到影响。<br /></li>
</ol>

<p>分类：</p>

<ol>
<li><p>普通索引和维护索引，主键索引是一种特殊的唯一索引，不允许空值。</p>

<pre><code>CREATE TABLE t1
(
    id INT NOT NULL, 
    NAME CHAR(30) NOT NULL, 
    UNIQUE INDEX UniqIdx(id)   #创建唯一索引 索引名称UniqIdx 字段为id
); 
SHOW CREATE TABLE t1; 
    CREATE TABLE `t1` (                                             
    `id` int(11) NOT NULL,                                     
    `name` char(30) NOT NULL,                                  
    UNIQUE KEY `UniqIdx` (`id`)                                
) ENGINE=MyISAM DEFAULT CHARSET=utf8  
</code></pre></li>
</ol>


  <div class="more">
    <a href="/general/mysql-%E7%B4%A2%E5%BC%95/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/general/Mysql-%E8%A7%A6%E5%8F%91%E5%99%A8/">Mysql 触发器</a> <span class="date">2016-03-16</span></h3>

  <p>之前写了一个数据库写操作脚本，定时执行，但是在检查结果时，发现我操作的数据有问题。多次检查脚本都确定没有问题，所以想到给数据表添加行触发器，检查脚本执行情况。</p>

<pre><code>USE rootdb;
DROP TRIGGER oversee_emp_sup; 
DELIMITER $  #定义定界符
CREATE TRIGGER oversee_emp_sup AFTER UPDATE ON hr_employee
FOR EACH ROW  
BEGIN
DECLARE msg VARCHAR(300);  
    INSERT hr_oversee (emp_sn,old_value,new_value,craete_time) VALUES (new.emp_sn,old.emp_superior,new.emp_superior,new.modifytime);
    IF(new.emp_superior = '' &amp;&amp;  old.emp_superior &lt;&gt; ''  ) THEN 
    SET msg = &quot;用户更改上级错误.&quot;;  
            SIGNAL SQLSTATE 'HY000' SET MESSAGE_TEXT = msg;  
    END IF;
END;
$  #结束定界符
</code></pre>

<p>监控数据更新时，往临时数据表中添加数据，并且出现上级字段为空是返回错误。目前还在监控执行中，不过已经可以确定不是我脚本的问题，我也甚是欣慰啊。</p>


  <div class="more">
    <a href="/general/Mysql-%E8%A7%A6%E5%8F%91%E5%99%A8/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/general/MyISAM%E5%92%8CInnoDB%E7%9A%84%E5%8C%BA%E5%88%AB/">MyISAM和InnoDB的区别</a> <span class="date">2016-03-16</span></h3>

  <p>1.mysql默认引擎采用MyISAM。</p>

<p>2.MyISAM不支持事务，InnoDB支持事务。InnoDB的autocommit 默认打开，即每条sql默认被封装为一个事务，自动提交。这样会影响速度，所以最好是吧多条sql语句显示放在begin和commit之间。</p>

<p>3.InnoDB支持行锁，MyISAM只支持到表锁。MyISAM同一张表上的读锁和写锁互斥，并且默认写请求优先级高，所以MyISAM不是用于大量查询和修改并存的情况，会导致进程长时间阻塞。</p>

<p>4.InnoDB支持外键，MyISAM不支持外键。</p>

<p>5.InnoDB不支持全文索引，MyISAM支持。</p>

<p>6.MyISAM有内置计数器，当count(*)没有where条件时，MyISAM的读取速度更快。</p>


  <div class="more">
    <a href="/general/MyISAM%E5%92%8CInnoDB%E7%9A%84%E5%8C%BA%E5%88%AB/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/general/apache-%E9%85%8D%E7%BD%AE%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA/">apache 配置虚拟主机</a> <span class="date">2015-12-08</span></h3>

  <p>公司测试服务器默认80端口访问公司网站，近期新建一个项目，需要在测试服务器配置端口访问</p>

<p>首先，修改apache 配置文件 httpd.conf</p>

<pre><code>Listen 81 //监听81端口 

&lt;VirtualHost *:81&gt;  
    ServerAdmin www.59shopnc.com  
    DocumentRoot &quot;/var/www2/shopnc&quot;  
    ServerName www.59shopnc.com  
    ErrorLog &quot;/tmp/logs/shopnc-error.log&quot;  
    CustomLog &quot;/tmp/logs/shopnc-access.log&quot; common  
    &lt;Directory &quot;/var/www2/shopnc&quot;&gt;  
        Options Indexes FollowSymLinks  
        AllowOverride None  
        Order allow,deny  
        Allow from all  //apache 2.2  
        Require all granted  //apache 2.4  
    &lt;/Directory&gt;  
&lt;/VirtualHost&gt;  
</code></pre>


  <div class="more">
    <a href="/general/apache-%E9%85%8D%E7%BD%AE%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/general/Linux%E5%AD%A6%E4%B9%A003-vsftp-%E6%96%B0%E5%A2%9E%E7%94%A8%E6%88%B7/">Linux学习03 vsftp 新增用户</a> <span class="date">2015-12-07</span></h3>

  <p>新增个ftp用户 也是弄了小半天</p>

<pre><code># useradd test  //新增用户test
# passwd tset
</code></pre>

<p>//输入密码设置</p>

<pre><code># usermod -d /home/php //设置权限
# usermod -s /sbin/nologin test //限制test只能登录ftp
# usermod -s /sbin/bash test //回复test正常
</code></pre>

<p>限制用户只能访问/home/test，不能访问其他路径</p>

<p>修改/etc/vsftpd/vsftpd.conf如下：</p>

<pre><code>#chroot_list_enable=YES //限制访问自身目录  
#chroot_list_file=/etc/vsftpd/vsftpd.chroot_list  
</code></pre>


  <div class="more">
    <a href="/general/Linux%E5%AD%A6%E4%B9%A003-vsftp-%E6%96%B0%E5%A2%9E%E7%94%A8%E6%88%B7/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/general/Linux-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B002/">Linux 学习笔记02</a> <span class="date">2015-11-17</span></h3>

  <ol>
<li>重启memcache ： /etc/init.d/memcached restart</li>
<li>查看Apache日志 ：/var/log/error-log    或者先查看日志地址： /etc/httpd/conf/httpd.conf   查找 /CustomLog</li>
<li>查看之前输入命令 ：history</li>
<li>查找文件位置 ： find / -name &ldquo;httpd.conf&rdquo;</li>
<li>清空日志文件： echo &ldquo;&rdquo; &gt; error.log</li>
<li>给文件权限：  chmod +x a.sh<br /></li>
<li>查看服务器定时任务 ： crontab -l</li>
<li>编辑服务器定时任务 ： crontab -e

<br />

<br />

<br /></li>
</ol>


  <div class="more">
    <a href="/general/Linux-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B002/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/general/Mysql-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B001---%E5%85%B3%E4%BA%8Esql_mode/">Mysql 学习笔记01-- 关于sql_mode</a> <span class="date">2015-10-27</span></h3>

  <p>对于SQL_MODE的设置，可以在MySQL的配置文件如my.cnf和my.ini中进行，也可以在客户端工具中进行，并且可以分别进行全局的设置或当前会话的设
置。下面的命令可以用来查看当前SQL_MODE的设置情况。</p>

<pre><code>select @@global.sql_mode; //查看全局模式  

select @@session.sql_mode; //查看当前回话模式

set @@global.sql_mode = ''; | set @@global.sql_mode = 'staict_trans_tables';
//设置mysql为宽松模式或者严格模式
</code></pre>

<p>NO_UNSIGNED_SUBTRACTION 表示没有定义</p>

<p>严格模式是指将SQL_MODE变量设置为STRICT_TRANS_TABLES或STRICT_ALL_TABLES中的至少一种。现在来看一下SQL_MODE
可以设置的选项。</p>

<p>STRICT_TRANS_TABLES：在该模式下，如果一个值不能插入到一个事务表(例如表的存储引擎为InnoDB)中，则中断当前的操作不影响非事务表(例如
表的存储引擎为MyISAM)。</p>


  <div class="more">
    <a href="/general/Mysql-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B001---%E5%85%B3%E4%BA%8Esql_mode/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/general/Linux-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B001/">Linux 学习笔记01</a> <span class="date">2015-10-27</span></h3>

  <ol>
<li><p>Linux 关机命令:</p>

<p>init 0;
shutdown -t 0;
shutdown now;</p></li>

<li><p>Linux 查看FTP状态是否正常: ps -ef | grep ftp;</p>

<p>如果没有任何ftp关键字信息，则判断服务是否开启</p>

<p>service vsftpd status</p>

<p>开启：service vsftpd start</p></li>

<li><p>Linux 查看系统时间 ：date</p></li>
</ol>


  <div class="more">
    <a href="/general/Linux-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B001/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/general/php-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E5%8C%96%E4%B8%BA%E6%95%B0%E5%AD%97/">php 字符串转化为数字</a> <span class="date">2015-09-28</span></h3>

  <p>PHP是一门弱语言，当你用字符串类型和数字类型直接比较时，PHP会进行自动类型转换，把字符串类型转换为数字类型，然后进行比较。</p>

<p>但是这里要提到的是一个特殊的值：E，E作为科学计数法中的一种</p>

<pre><code>$a = '6E01';
if( 6 == $a ){
    echo 'equal'.'&lt;br/&gt;';
}else{
    echo 'not equal'.'&lt;br/&gt;';
}


//输出 'not equal '
$b = '5C01';
if( $b == 5){
    echo 'aaa';
}else{
    echo 'bbb';
}
</code></pre>


  <div class="more">
    <a href="/general/php-%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E5%8C%96%E4%B8%BA%E6%95%B0%E5%AD%97/" class="btn">read more..</a>
  </div>
</div>

<div class="post">
  <h3 class="title"><a href="/general/SQL-Server-%E5%AD%A6%E4%B9%A03%28%E5%85%B3%E4%BA%8Esql-server%E4%B8%AD%E6%96%87%E5%8F%96%E5%80%BC%E4%B8%8D%E5%AE%8C%E6%95%B4%E9%97%AE%E9%A2%98%29/">SQL Server 学习3(关于sql server中文取值不完整问题)</a> <span class="date">2015-09-22</span></h3>

  <p>PHP通过ODBC连接SQL Server 数据库，查询结果中文显示不完整的问题，今天折腾了一下午。</p>

<p><img src="http://cyanme.com/content/uploadfile/201509/6f961442916215.png" alt="" /></p>

<p>在百度，Googl上搜索了一下午都没明白怎么回事。都开始怀疑是不是 值本身有问题了。</p>

<p>终于在无意中 看到 <code>SELECT</code> <code>CONVERT</code><code>(NVARCHAR(1),</code><code>'中国'</code><code>)写法 ，又想起同事友情提示，会不会是中文长度受限制。</code></p>

<p>果然不出意外，就是字符长度问题。</p>

<p>SELECT DEPTID,DESCR,MANAGER_ID,CONVERT(NVARCHAR(20),CST_DEPT_CLASS) as
CST_DEPT_CLASS,DEPTID2,LASTUPDDTTM FROM PS_CST_DEPT_I_VW ORDER BY LASTUPDDTTM
ASC</p>

<p><img src="http://cyanme.com/content/uploadfile/201509/befa1442916511.png" alt="" /></p>

<p>数据总算正常了，</p>


  <div class="more">
    <a href="/general/SQL-Server-%E5%AD%A6%E4%B9%A03%28%E5%85%B3%E4%BA%8Esql-server%E4%B8%AD%E6%96%87%E5%8F%96%E5%80%BC%E4%B8%8D%E5%AE%8C%E6%95%B4%E9%97%AE%E9%A2%98%29/" class="btn">read more..</a>
  </div>
</div>

  </div>
</div>

      </div>

      <footer>
        <p>&copy; Firstname Lastname 2013 
          with help from <a href="http://github.com/wendal/gor" target="_blank" title="Gor -- Fast Blog">Gor</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
		  and Idea from <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
        </p>
      </footer>

    </div> <!-- /container -->

    
<script src="//cdnjscn.b0.upaiyun.com/libs/prettify/r298/prettify.min.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>

    
<script type="text/javascript">

  var _gaq = _gaq || [];
  var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-123-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </body>
</html>
